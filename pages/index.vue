<template>
    <div class="rootPage">
        <div class="sur-theater h-full w-full -mt-12 md:-mt-24 relative">
            <div class="container mx-auto h-screen">
                <div class="w-5/6 h-full flex flex-col justify-center">
                    <h2 ref="lettering_job">Hi, I'm Léo DESIGAUX, a fullStack</h2>
                    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 107.6 12.8" id="webdev_logo" xml:space="preserve" style="enable-background:new 0 0 107.6 9.9">
                        <g>
                            <path d="M14.4,0.7l-2.7,8.4h-3L7.3,4.6L5.9,9.1h-3L0.2,0.7h2.9l1.5,4.8l1.5-4.8h2.6l1.5,4.8l1.5-4.8H14.4z" class="st0" style="stroke: rgba(255, 255, 255, 0); stroke-dashoffset: 0px; fill: rgb(255, 255, 255);" stroke-dasharray="61.38768768310547"></path>
                            <path d="M21.9,6.9v2.1h-7V0.7h6.8v2.1h-4v1h3.6v2h-3.6v1.1H21.9z" class="st0" style="stroke: rgba(255, 255, 255, 0); stroke-dashoffset: 0px; fill: rgb(255, 255, 255);" stroke-dasharray="45.79999542236328"></path>
                            <path d="M30.6,5.5C30.8,5.8,31,6.3,31,6.8c0,0.7-0.3,1.3-0.9,1.7s-1.5,0.6-2.6,0.6h-4.7V0.7h4.5c1.1,0,2,0.2,2.5,0.6
            c0.6,0.4,0.9,0.9,0.9,1.6c0,0.4-0.1,0.7-0.3,1.1c-0.2,0.3-0.5,0.6-0.9,0.8C29.9,4.9,30.3,5.1,30.6,5.5z M25.5,2.7v1.2h1.3
            c0.6,0,0.9-0.2,0.9-0.6s-0.3-0.6-0.9-0.6H25.5z M28.1,6.4c0-0.4-0.3-0.7-0.9-0.7h-1.7v1.3h1.7C27.8,7.1,28.1,6.9,28.1,6.4z" class="st0" style="stroke: rgba(255, 255, 255, 0); stroke-dashoffset: 0px; fill: rgb(255, 255, 255);" stroke-dasharray="45.459442138671875"></path>
                            <path d="M31.7,0.7h4.1c0.9,0,1.8,0.2,2.5,0.5C39,1.5,39.5,2,39.9,2.7c0.4,0.6,0.6,1.4,0.6,2.2c0,0.9-0.2,1.6-0.6,2.2
            c-0.4,0.6-1,1.1-1.7,1.5c-0.7,0.3-1.5,0.5-2.5,0.5h-4.1V0.7z M35.7,6.9c0.6,0,1.1-0.2,1.5-0.5c0.4-0.3,0.5-0.8,0.5-1.5
            c0-0.6-0.2-1.1-0.5-1.5c-0.4-0.3-0.9-0.5-1.5-0.5h-1.2v4H35.7z" class="st0" style="stroke: rgba(255, 255, 255, 0); stroke-dashoffset: 0px; fill: rgb(255, 255, 255);" stroke-dasharray="43.854923248291016"></path>
                            <path d="M48.3,6.9v2.1h-7V0.7h6.8v2.1h-4v1h3.6v2h-3.6v1.1H48.3z" class="st0" style="stroke: rgba(255, 255, 255, 0); stroke-dashoffset: 0px; fill: rgb(255, 255, 255);" stroke-dasharray="45.79999923706055"></path>
                            <path d="M58,0.7l-3.6,8.4h-2.8l-3.6-8.4h3l2,4.9l2.1-4.9H58z" class="st0" style="stroke: rgba(255, 255, 255, 0); stroke-dashoffset: 0px; fill: rgb(255, 255, 255);" stroke-dasharray="37.60133743286133"></path>
                            <path d="M65.2,6.9v2.1h-7V0.7H65v2.1h-4v1h3.6v2H61v1.1H65.2z" class="st0" style="stroke: rgba(255, 255, 255, 0); stroke-dashoffset: 0px; fill: rgb(255, 255, 255);" stroke-dasharray="45.79999542236328"></path>
                            <path d="M66,0.7h2.8v6.2h3.8v2.2H66V0.7z" class="st0" style="stroke: rgba(255, 255, 255, 0); stroke-dashoffset: 0px; fill: rgb(255, 255, 255);" stroke-dasharray="30.000011444091797"></path>
                            <path d="M75,8.7c-0.7-0.4-1.3-0.9-1.7-1.6s-0.6-1.4-0.6-2.3c0-0.8,0.2-1.6,0.6-2.3s1-1.2,1.7-1.6
            c0.7-0.4,1.5-0.6,2.4-0.6s1.7,0.2,2.4,0.6c0.7,0.4,1.3,0.9,1.7,1.6C82,3.3,82.2,4,82.2,4.9c0,0.8-0.2,1.6-0.6,2.3
            c-0.4,0.7-1,1.2-1.7,1.6c-0.7,0.4-1.5,0.6-2.4,0.6S75.7,9.1,75,8.7z M78.4,6.7c0.3-0.2,0.5-0.4,0.7-0.7c0.2-0.3,0.3-0.7,0.3-1.1
            c0-0.4-0.1-0.8-0.3-1.1c-0.2-0.3-0.4-0.6-0.7-0.7c-0.3-0.2-0.6-0.3-1-0.3s-0.7,0.1-1,0.3c-0.3,0.2-0.5,0.4-0.7,0.7
            c-0.2,0.3-0.3,0.7-0.3,1.1c0,0.4,0.1,0.8,0.3,1.1s0.4,0.6,0.7,0.7c0.3,0.2,0.6,0.3,1,0.3S78.1,6.9,78.4,6.7z" class="st0" style="stroke: rgba(255, 255, 255, 0); stroke-dashoffset: 0px; fill: rgb(255, 255, 255);" stroke-dasharray="42.216583251953125"></path>
                            <path d="M89,1.1c0.6,0.3,1,0.6,1.3,1.1s0.5,1,0.5,1.7s-0.2,1.2-0.5,1.7C90,6,89.6,6.4,89,6.6C88.4,6.9,87.8,7,87,7
            h-1.2v2.1h-2.8V0.7h4C87.8,0.7,88.4,0.8,89,1.1z M87.7,4.6C87.9,4.4,88,4.2,88,3.9s-0.1-0.6-0.3-0.7c-0.2-0.2-0.5-0.3-0.9-0.3h-1v2
            h1C87.2,4.8,87.5,4.8,87.7,4.6z" class="st0" style="stroke: rgba(255, 255, 255, 0); stroke-dashoffset: 0px; fill: rgb(255, 255, 255);" stroke-dasharray="37.12616729736328"></path>
                            <path d="M98.5,6.9v2.1h-7V0.7h6.8v2.1h-4v1h3.6v2h-3.6v1.1H98.5z" class="st0" style="stroke: rgba(255, 255, 255, 0); stroke-dashoffset: 0px; fill: rgb(255, 255, 255);" stroke-dasharray="45.79999542236328"></path>
                            <path d="M102.9,7h-0.8v2.1h-2.8V0.7h4c0.8,0,1.5,0.1,2,0.4c0.6,0.3,1,0.6,1.3,1.1s0.5,1,0.5,1.7c0,0.6-0.1,1.1-0.4,1.6
            c-0.3,0.4-0.7,0.8-1.2,1.1l1.8,2.6h-3L102.9,7z M104.1,3.1c-0.2-0.2-0.5-0.3-0.9-0.3h-1v2h1c0.4,0,0.7-0.1,0.9-0.3s0.3-0.4,0.3-0.7
            S104.2,3.3,104.1,3.1z" class="st0" style="stroke: rgba(255, 255, 255, 0); stroke-dashoffset: 0px; fill: rgb(255, 255, 255);" stroke-dasharray="43.27360534667969"></path>
                        </g>
                    </svg>
                </div>
            </div>
        </div>
        <div class="relative pt-24 bg-[#0a0919e0] backdrop-blur clip-pathed">
            <div class="container mx-auto flex flex-col gap-2 py-16 pt-32">
                <h3 class="mb-8">What’s in my tool belt ?</h3>
                    <div class="marquee">
                        <ul class="marquee__content">
                            <li><img src="/img/logos/vuejs.svg" alt=""></li>
                            <li><img src="/img/logos/webgl.svg" alt=""></li>
                            <li><img src="/img/logos/symfony.svg" alt=""></li>
                            <li><img src="/img/logos/vuejs.svg" alt=""></li>
                            <li><img src="/img/logos/webgl.svg" alt=""></li>
                            <li><img src="/img/logos/symfony.svg" alt=""></li>
                        </ul>

                        <ul aria-hidden="true" class="marquee__content">
                            <li><img src="/img/logos/vuejs.svg" alt=""></li>
                            <li><img src="/img/logos/webgl.svg" alt=""></li>
                            <li><img src="/img/logos/symfony.svg" alt=""></li>
                            <li><img src="/img/logos/vuejs.svg" alt=""></li>
                            <li><img src="/img/logos/webgl.svg" alt=""></li>
                            <li><img src="/img/logos/symfony.svg" alt=""></li>
                        </ul>
                    </div>
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Aspernatur architecto, quibusdam fugiat sunt ea molestiae porro. Placeat ducimus, odio minima commodi consequuntur nihil similique provident qui iure reiciendis fugiat odit?</p>
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Aspernatur architecto, quibusdam fugiat sunt ea molestiae porro. Placeat ducimus, odio minima commodi consequuntur nihil similique provident qui iure reiciendis fugiat odit?</p>
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Aspernatur architecto, quibusdam fugiat sunt ea molestiae porro. Placeat ducimus, odio minima commodi consequuntur nihil similique provident qui iure reiciendis fugiat odit?</p>
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Aspernatur architecto, quibusdam fugiat sunt ea molestiae porro. Placeat ducimus, odio minima commodi consequuntur nihil similique provident qui iure reiciendis fugiat odit?</p>
            </div>
        </div>
    </div>
</template>
<script setup>
import { gsap } from 'gsap';
import { ref, onMounted } from 'vue'
const lettering_job = ref();
definePageMeta({
    pageTransition: {
        name: 'page-out',
        mode: 'out-in',
    },
    layoutTransition: false
})
onMounted(() => {
    let splitted = lettering_job.value.innerText.split('');
    lettering_job.value.innerText = "";
    for (var i in splitted) {
        let letter = splitted[i];
        lettering_job.value.setAttribute("aria-label", splitted.join());
        let color = "rgba(197, 206, 255, .6)";
        let margin = "0px";
        if (i != 0 && splitted[i - 1] == " ") {
            margin = "8px";
        }
        if (i > 6 && i < 20) {
            color = "rgba(255, 255, 255, 1)";
        }
        if (i > 10 && i < 20) {
            color = "rgba(255, 255, 255, 1);font-weight: bold;";
        }
        lettering_job.value.innerHTML += "<span aria-hidden='true' style='margin-left: " + margin + ";position: relative;color:" + color + ";display: inline-block;pointer-events:none;'>" + letter + "</span>";
    }

    const tlTitle = gsap.timeline({ defaults: { stagger: 0.1, ease: "back.out" } });
    tlTitle.fromTo("h2 span", {
        y: 20,
        opacity: 0,
    }, {
        y: 0,
        opacity: 1,
        duration: .4,
        delay: .8,
        stagger: function (index, target, list) {
            let stag = index * 0.05;
            if (index > 1) {
                stag += 1;
            }
            if (index > 19) {
                stag += 1;
            }
            return stag;
        }
    }, "<")

    tlTitle.fromTo("#webdev_logo path", {
        y: -15,
        stroke: "rgba(255, 255, 255, 0.5)",
    }, {
        y: 0,
        duration: 0.5,
        delay: 1
    }, "-=90%")
    tlTitle.fromTo("#webdev_logo path", {
        strokeDashoffset: (i, item) => {
            return item.getTotalLength();
        },
    }, {
        strokeDashoffset: 0,
        duration: 2,
        ease: "none",
    }, "-=90%")

    tlTitle.fromTo("#webdev_logo path", {
        stroke: "rgba(255, 255, 255, 0.5)",
        fill: "rgba(182, 131, 255, 0)",
    }, {
        stroke: "rgba(255, 255, 255, 0)",
        fill: "rgba(255, 255, 255, 1)",
        duration: 1.5,
        delay: .2,
    }, "-=50%");
    tlTitle.play();
})
</script>
<style scoped>
#webdev_logo path {
    stroke-width: 0.1px;
}

.clip-pathed {
    clip-path: polygon(100% 100%, 0% 100%, 0.00% 5.24%, 6.67% 8.31%, 13.33% 11.68%, 20.00% 14.87%, 26.67% 17.43%, 33.33% 19.01%, 40.00% 19.37%, 46.67% 18.48%, 53.33% 16.45%, 60.00% 13.57%, 66.67% 10.24%, 73.33% 6.94%, 80.00% 4.13%, 86.67% 2.19%, 93.33% 1.41%, 100.00% 1.89%);
}

h2 {
    font-size: 40px;
    margin-bottom: 8px;
}

h3 {
    color: transparent;
    font-size: 40px;
    width: 100%;
    text-align: center;
    background: linear-gradient(to right, #2c2c36 0, #555574 15%, #fff 50%, #555574 85%, #2c2c36 100%);
    background-clip: text;
    -webkit-background-clip: text;
}

.marquee {
    --gap: 0.2rem;
    display: flex;
    overflow: hidden;
    mask-image: linear-gradient(90deg, transparent 0, rgb(0 0 0 / 100%) 10%, rgb(0 0 0 / 100%) 90%, transparent 100%);
    user-select: none;
    padding: 16px;
    gap: var(--gap);
}

.marquee__content {
    flex-shrink: 0;
    display: flex;
    justify-content: space-around;
    gap: var(--gap);
    min-width: 100%;
    animation: scroll 20s linear infinite;
}

.marquee__content img {
    object-fit: contain;
    object-position: center;
    width: 200px;
    height: 50px;
}

@keyframes scroll {
    from {
        transform: translateX(0);
    }

    to {
        transform: translateX(calc(-100% - var(--gap)));
    }
}
</style>